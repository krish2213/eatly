<% layout('layouts/boilerplate') %>
    <div class="col-12 col-md-6 offset-md-3">
        <div class="card shadow mb-3">
            <div class="card-body">
                <form action="/foodzones/<%= foodzone.id %>?_method=PUT" method="POST" novalidate class="validated-form mb-3"
            enctype="multipart/form-data">

            <h2 class="text-center">Edit Foodzone
            </h2>
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="foodzone[name]" value="<%= foodzone.name %>"
                    required>
                <div class="valid-feedback">
                    Perfect!
                </div>
            </div>
            <div class="mb-3">
                <label for="location" class="form-label">Location </label>
                <input type="text" class="form-control" id="location" name="foodzone[location]"
                    value="<%= foodzone.location %>" required>
                <div class="valid-feedback">
                    Perfect!
                </div>
            </div>
            <div class="mb-3">
                <label for="avgPrice" class="form-label">Price Range (INR)</label>
                <input type="text" class="form-control" id="avgPrice" name="foodzone[avgPrice]" placeholder="XXX - XXX"
                    value="<%= foodzone.avgPrice %>" required>
                <div class="valid-feedback">
                    Perfect!
                </div>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" id="description" rows="3" name="foodzone[description]"
                    required><%= foodzone.description %></textarea>
                <h10 class="text-muted">* Content is optimized for consistent professional tone.</h10>
                <div class="valid-feedback">
                    Perfect!
                </div>
            </div>
            <div class="mb-3">
                <div class="mb-3">
                    <label for="image" class="form-label">Add/Upload New Image(s)</label>
                    <input class="form-control" type="file" id="image" name="image" multiple>
                </div>
            </div>
            <div class="mb-3 d-flex flex-wrap gap-3">
                <% foodzone.images.forEach(function(img, i) { %>
                    <% if(img.fileName!=='placeholder.jpeg') {%>
                    <div class="text-center">
                        <img src="<%= img.url %>" class="img-thumbnail"
                            style="height:150px; width:150px; object-fit:cover;" alt="">

                        <div class="form-check mt-2">
                            <input class="form-check-input" type="checkbox" id="image-<%= i %>" name="deleteImages[]"
                                value="<%= img.fileName %>">
                            <label class="form-check-label d-block" for="image-<%= i %>">Delete?</label>
                        </div>
                    </div>
                    <%} }) %>
            </div>
            <div class="d-grid">
            <button class="btn btn-dark">Save Changes</button>
            </div>
        </form>
            </div>
        </div>
    </div>